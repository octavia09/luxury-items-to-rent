<p id="notice"><%= notice %></p>
<div class="container">
  <div class="d-flex justify-content-between align-items-center">
    <h1 class="text-bold">All Luxury Items</h1>
    <%= link_to new_item_path, class: "btn btn-primary" do %>
      <i class="fas fa-plus"></i>
      Add a new item
    <% end %>
  </div>


  <%= simple_form_for :search, url: items_path, method: :get do |f| %>
    <div class="search-form-control form-group mt-3 input-group">
      <input class="form-control string required" type="text" name="search[query]" id="search_query" />
      <span class="input-group-btn">
        <button name="button" type="submit" class="btn btn-outline-primary">
          <i class="fas fa-search"></i> Search
        </button>
      </span>
    </div>
  <% end %>


  <% unless @items.empty? %>
    <div class="row">
      <% @items.each do |item| %>
        <div class="col-12 col-md-6 col-lg-4">
          <div class="card m-3 shadow-sm p-3 bg-body rounded">
            <% if item.photos.attached? %>
              <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                  <% item.photos.each_with_index do |photo, index| %>
                    <div class="carousel-item <%= "active " if index == 0 %>">
                      <div class="image d-block" style='background-image: url(<%= cl_image_path photo.key %>); width: 100%; height: 100px; background-size: cover;'></div>
                    </div>
                  <% end %>
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls"  data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>

                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls"  data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>

              </div>
            <% end %>
            <h4 class="mt-3"><%= item.name %></h4>
            <p><%= item.category.capitalize %></p>
            <div class="d-flex justify-content-end align-items-center">
              <%= link_to 'Show', item_path(item), class: "btn btn-primary mr-2" %>
              <%= link_to 'Edit', edit_item_path(item), class: "btn btn-warning mr-2" %>
              <%= link_to 'Delete', item_path(item), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <h3>Sorry, we don't have this category</h3>
  <% end %>
</div>
